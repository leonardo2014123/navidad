<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŽ† Feliz AÃ±o Nuevo ðŸŽ†</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;500&display=swap" rel="stylesheet">

<style>
html, body {
    margin: 0;
    padding: 0;
    background: black;
    overflow: hidden;
    cursor: pointer;
}

canvas {
    display: block;
}

/* ===== CONTENEDOR MENSAJE ===== */
.mensaje {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    opacity: 0;
    transition: opacity 1s ease;
    z-index: 10;
    color: white;
    padding: 15px;
    width: 90vw;
    max-width: 600px;
}

.mensaje.mostrar {
    opacity: 1;
}

/* ===== TITULO ===== */
h1 {
    font-family: 'Great Vibes', cursive;
    font-size: clamp(2.5rem, 8vw, 5rem);
    line-height: 1.2;
    margin: 0 0 15px 0;
    padding: 10px;
    background: linear-gradient(120deg, #fff, #ffd700, #fff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 30px rgba(255,215,0,0.8);
}

/* ===== MENSAJE PRINCIPAL ===== */
p {
    font-family: 'Montserrat', sans-serif;
    font-size: clamp(1rem, 3vw, 1.3rem);
    line-height: 1.5;
    white-space: pre-line;
    opacity: 0.95;
    margin: 0;
    padding: 10px 15px;
    background: rgba(255,255,255,0.05);
    border-radius: 12px;
    backdrop-filter: blur(4px);
    text-shadow:
        0 0 6px rgba(255,255,255,0.1),
        0 0 12px rgba(255,215,0,0.05);
}

/* ===== TEXTO INICIAL ===== */
.inicio {
    position: fixed;
    bottom: 20px;
    width: 100%;
    text-align: center;
    color: white;
    font-family: Montserrat;
    opacity: 0.7;
    font-size: 1rem;
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div class="mensaje" id="mensaje">
    <h1 id="titulo"></h1>
    <p id="subtitulo"></p>
</div>

<div class="inicio" id="inicio">âœ¨ Haz click para empezar âœ¨</div>

<audio id="musica" loop src="anio_nuevo.mp3"></audio>
<audio id="launchSound" src="lanzamiento.mp3"></audio>
<audio id="boomSound" src="explosion.mp3"></audio>

<script>
/* ===== CANVAS ===== */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
}
resize();
window.addEventListener("resize", resize);

const gravity = 0.05;
let fireworks = [];
let particles = [];
let started = false;

/* ===== FUEGO ===== */
class Firework {
    constructor() {
        this.x = Math.random() * canvas.width;
        this.targetY = canvas.height * (0.2 + Math.random() * 0.35);
        this.y = canvas.height;
        this.vy = -(Math.random() * 5 + 7);
        this.exploded = false;
        launchSound.currentTime = 0;
        launchSound.play();
    }
    update() {
        this.y += this.vy;
        this.vy += gravity;
        if (this.y <= this.targetY && !this.exploded) {
            this.exploded = true;
            explode(this.x, this.y);
        }
    }
    draw() {
        ctx.fillStyle = "#fff";
        ctx.beginPath();
        ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
        ctx.fill();
    }
}

/* ===== PARTICULAS ===== */
class Particle {
    constructor(x, y, angle, speed, color, spread, glow) {
        this.x = x;
        this.y = y;
        this.vx = Math.cos(angle) * speed;
        this.vy = Math.sin(angle) * speed;
        this.spread = spread;
        this.life = 120; // menos vida para mejorar rendimiento
        this.alpha = 1;
        this.baseLength = Math.random() * 8 + 10; // mÃ¡s corto
        this.length = this.baseLength;
        this.color = color;
        this.glow = glow;
    }
    update() {
        let bend = 1 - this.life / 120;
        this.vx += this.spread * (1 + bend * 0.5);
        this.x += this.vx;
        this.y += this.vy;
        this.vy += gravity * 0.35;
        this.vx *= 0.99;
        this.vy *= 0.985;
        this.alpha -= 0.008; // mÃ¡s rÃ¡pido para quitar partÃ­culas rÃ¡pido
        this.life--;
        this.length = this.baseLength * (this.life / 120);
    }
    draw() {
        ctx.strokeStyle = `rgba(${this.color},${this.alpha})`;
        ctx.lineWidth = 0.6;
        ctx.shadowBlur = this.glow * this.alpha;
        ctx.shadowColor = `rgba(${this.color},${this.alpha})`;
        ctx.beginPath();
        ctx.moveTo(this.x, this.y);
        ctx.lineTo(this.x - this.vx * this.length, this.y - this.vy * this.length);
        ctx.stroke();
        ctx.shadowBlur = 0;
    }
}

/* ===== EXPLOSION ===== */
function explode(x, y) {
    boomSound.currentTime = 0;
    boomSound.play();

    const rings = Math.random() < 0.3 ? 3 : 2; // menos partÃ­culas en mÃ³vil
    const count = rings === 3 ? 40 : 25;
    const speed = rings === 3 ? 2 : 1.5;

    const baseHue = Math.random() * 360;

    for (let r = 1; r <= rings; r++) {
        for (let i = 0; i < count; i++) {
            const angle = (Math.PI * 2 / count) * i;
            const spread = (Math.random() - 0.5) * 0.02;
            const hue = baseHue + Math.random() * 25 - 12;
            const color = hslToRgb(hue, 100, 60);
            const glow = 15 + Math.random() * 15;
            particles.push(new Particle(x, y, angle, speed * r, color, spread, glow));
        }
    }
}

/* ===== COLOR ===== */
function hslToRgb(h, s, l) {
    s /= 100; l /= 100;
    const k = n => (n + h / 30) % 12;
    const a = s * Math.min(l, 1 - l);
    const f = n => l - a * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));
    return `${Math.round(255 * f(0))},${Math.round(255 * f(8))},${Math.round(255 * f(4))}`;
}

/* ===== ANIMACION ===== */
function animate() {
    ctx.fillStyle = "rgba(0,0,0,0.25)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    fireworks.forEach((f, i) => {
        f.update();
        f.draw();
        if (f.exploded) fireworks.splice(i, 1);
    });

    particles.forEach((p, i) => {
        p.update();
        p.draw();
        if (p.life <= 0) particles.splice(i, 1);
    });

    requestAnimationFrame(animate);
}

/* ===== TEXTO EXACTO ===== */
const texto = 
`Que tus dÃ­as en 2026 tengan mÃ¡s luces que sombras, 
mÃ¡s misterios que certezas
y que tus metas sean tan seductoras 
como secretos que nadie se atreve a descubrir ðŸ–¤

Â¡Brinda, baila, sueÃ±a 
que este aÃ±o sea tan intenso que incluso la noche quiera quedarse despierta contigo! ðŸ¥‚ 

y por mÃ¡s Mobile Legends xD`;

let i = 0;
subtitulo.style.opacity = 0;
subtitulo.style.transform = "translateY(20px)";

function escribir() {
    // Para mÃ³viles, mostrar todo el texto de golpe
    if(window.innerWidth < 768){
        subtitulo.textContent = texto;
        subtitulo.style.opacity = 1;
        subtitulo.style.transform = "translateY(0)";
    } else {
        if (i === 0) {
            subtitulo.style.transition = "0.8s ease";
            subtitulo.style.opacity = 1;
            subtitulo.style.transform = "translateY(0)";
        }
        if (i < texto.length) {
            subtitulo.textContent += texto[i];
            i++;
            setTimeout(escribir, 42);
        }
    }
}

/* ===== INICIO SIN CRONOMETRO ===== */
document.body.addEventListener("click", () => {
    if (started) return;

    started = true;
    inicio.style.display = "none";
    mensaje.classList.add("mostrar");
    titulo.innerHTML = "Â¡Feliz AÃ±o Nuevo!<br>AME";
    escribir();
    musica.play();

    function launchBeat() {
        fireworks.push(new Firework());
        setTimeout(launchBeat, 800 + Math.random() * 400);
    }

    launchBeat();
    animate();
});
</script>

</body>
</html>



